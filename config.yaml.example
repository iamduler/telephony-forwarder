# Event Hub Configuration

server:
  port: 8080
  read_timeout_seconds: 10
  write_timeout_seconds: 10

nats:
  url: "nats://localhost:4222"
  # url: "nats://app:STRONG_PASSWORD@127.0.0.1:4222"
  stream_name: "call-signals"
  subject_pattern: "call.signal.*"
  # ack_wait_seconds must be greater than backend timeout (3 seconds)
  ack_wait_seconds: 10
  max_deliveries: 3

# Route configuration: maps domains to backend endpoints
# Events are forwarded to ALL endpoints for a domain concurrently
# The system detects the domain from the "domain" field in the event payload
routes:
  - domain: "vietanh.cloudgo.vn"
    endpoints:
      - "http://localhost/vietanh/entrypoint.php?name=CloudCALLConnector&secret_key=bb7d4b236b564cf1ec27aa891331e01212"
  
  - domain: "event-hub.com"
    endpoints:
      - "https://backend1.example.com/webhook"
      - "https://backend2.example.com/webhook"
  
  - domain: "tenant1.example.com"
    endpoints:
      - "https://tenant1-backend.example.com/events"

